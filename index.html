<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MiSize Prototype</title>
  <style>
    :root{
      --brand:#8A2BE2;--brand-text:#fff;
      --bg:#0b0d12;--card:#111520;
      --border:#1b2230;--text:#eef1f5;--muted:#aab3c5;
      --radius:14px;--font:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    }
    *{box-sizing:border-box;}
    body{margin:0;font-family:var(--font);background:var(--bg);color:var(--text);}

    /* Top Bar (smaller) */
    .topbar{position:sticky; top:0; z-index:100; backdrop-filter:saturate(120%) blur(8px);
      background:rgba(15,19,26,.75); border-bottom:1px solid var(--border); padding:6px 10px;}
    .topbar-inner{display:flex; gap:12px; align-items:center; flex-wrap:wrap; max-width:1200px; margin:0 auto;}
    .topbar h1{font-size:14px; margin:0 8px 0 0; font-weight:800; letter-spacing:.2px; color:#cfe0ff;}
    .pill-row{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
    .pt-pill, .unit-pill{
      border:1px solid rgba(255,255,255,.12);
      background:#151a3a; color:#c9d3ea; font-weight:700; font-size:12px;
      padding:6px 10px; border-radius:999px; cursor:pointer; white-space:nowrap;
    }
    .pt-pill.active, .unit-pill.active{background:#1d4ed8;color:#fff;border-color:#1d4ed8;}

    /* Screens & layout */
    .screen{display:none;padding:20px 20px 90px;min-height:100vh;}
    .screen.active{display:block;}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:18px;}
    .row{display:grid;grid-template-columns:1fr;gap:12px;}
    @media(min-width:760px){
      .row.two{grid-template-columns:1fr 1fr}
      .row.three{grid-template-columns:repeat(3,1fr)}
    }
    label{font-size:14px;color:var(--muted);}
    select,input{width:100%;padding:12px;border-radius:10px;border:1px solid #243048;background:#0f131a;color:#eef1f5;}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:10px;}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#172034;border:1px solid #223049;font-size:12px;color:#c9d3ea;}
    .big{font-size:28px;font-weight:800;margin:0 0 6px;}
    .note{font-size:13px;opacity:.85;}
    .divider{height:1px;background:var(--border);margin:14px 0;}
    .success{color:#8ee0b2}.warning{color:#ffd27a}.danger{color:#ff9a9a}
    .spacer-top{height:8px;}

    /* Profile screen tweaks: smaller inputs + 3-per-row on wider screens */
    #profile select, #profile input{ padding:10px; font-size:14px; border-radius:10px; }
    @media (min-width:760px){
      #profile .row.two{ grid-template-columns: repeat(3,1fr); }
    }

    /* Hubs & tiles */
    .tiles{display:grid;grid-template-columns:1fr;grid-template-rows:repeat(4,1fr);gap:16px;height:calc(100vh - 210px);margin-top:20px;}
    .tiles button{font-size:28px;font-weight:800;border-radius:14px;border:0;color:#fff;cursor:pointer;width:100%;height:100%;background:#1d4ed8;}
    .hub{display:grid;grid-template-rows:repeat(5,1fr);grid-template-columns:1fr;gap:16px;height:calc(100vh - 210px);margin-top:20px;}
    .hub .bigbtn{width:100%;height:100%;font-size:26px;font-weight:800;display:flex;align-items:center;justify-content:center;border-radius:14px;border:0;background:#1d4ed8;color:#fff;cursor:pointer;}

    /* Bottom tabs (Hub is an active "back") */
    .bottom-tabs{position:fixed;left:0;right:0;bottom:0;background:#0f131a;border-top:1px solid var(--border);display:flex;z-index:30;}
    .bottom-tabs .tab{flex:1;padding:12px 8px;border:0;background:transparent;color:#cfd7ea;font-weight:700;cursor:pointer;}
    .bottom-tabs .tab.active{color:var(--brand);}
    #tab_home.active{color:#8A2BE2;}

    /* --- MiStats styles --- */
    .mi-bar{height:10px;border-radius:8px;background:#172034;border:1px solid #223049;overflow:hidden}
    .mi-bar > b, #mi_prog_bar{display:block;height:100%;width:0;background:#1d4ed8}
    .mi-row{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 0;border-bottom:1px solid var(--border)}
    .mi-row:last-child{border-bottom:0}
    .mi-tab.active{background:#1d4ed8;color:#fff;border-color:#1d4ed8}
    .mi-tabs{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 14px}
    .mi-tab{cursor:pointer}
    .mi-view{display:none}
    .mi-view.active{display:block}
    .mi-tiles{display:grid;grid-template-columns:1fr;gap:12px}
    .mi-tile{background:#0f131a;border:1px solid #223049;border-radius:12px;padding:12px}
    .mi-l{font-size:12px;color:var(--muted);letter-spacing:.3px}
    .mi-v{font-size:28px;font-weight:900;line-height:1.1}
    .mi-sub{font-size:12px;opacity:.85;margin-top:2px}
    .mi-legend{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0 0}
    .mi-legend .pill input{margin-right:6px}

    /* Splash */
    #splash{display:none;padding:0;}
    #splash.active{display:block;}
    .splash-stage{position:relative;height:100vh;width:100%;display:flex;align-items:center;justify-content:center;background:#2b1055;overflow:hidden;}
    .flash-logo-wrap{line-height:0;width:min(75vw,560px);aspect-ratio:1/1;background:center/contain no-repeat url('MiSize.png');margin:0 auto;opacity:1;z-index:1;}
  </style>
</head>
<body>

  <!-- Top Bar -->
  <div class="topbar" role="navigation" aria-label="Global controls">
    <div class="topbar-inner">
      <h1>MiSize</h1>

      <!-- top body-type pills -->
      <div class="pill-row" id="bodyTypePillsTop" aria-label="Body type">
        <button type="button" class="pt-pill active" data-val="standard">Standard</button>
        <button type="button" class="pt-pill" data-val="petite">Petite</button>
        <button type="button" class="pt-pill" data-val="tall">Tall</button>
        <button type="button" class="pt-pill" data-val="plus">Plus-size</button>
      </div>

      <div style="flex:1;"></div>

      <!-- top unit pills (cm/in) -->
      <div class="pill-row" id="unitPillsTop" aria-label="Units"></div>
    </div>
  </div>
  <div class="spacer-top"></div>

  <!-- Splash -->
  <section id="splash" class="screen active" aria-label="Splash">
    <div class="splash-stage">
      <div class="flash-logo-wrap" aria-label="MiSize logo"><div class="flash-logo-shine"></div></div>
    </div>
  </section>

  <!-- Home -->
  <section id="home" class="screen" aria-label="Home">
    <h1 class="big">Welcome to MiSize</h1>
    <p>Select your region:</p>
    <div class="tiles" role="group" aria-label="Regions">
      <button class="uk" onclick="switchTab('uk')" aria-label="United Kingdom">UK</button>
      <button class="eu" onclick="switchTab('eu')" aria-label="European Union">EU</button>
      <button class="us" onclick="switchTab('us')" aria-label="United States">US</button>
      <button class="ca" onclick="switchTab('ca')" aria-label="Canada">CA</button>
    </div>
  </section>

  <!-- UK Hub -->
  <section id="uk" class="screen" aria-label="UK hub">
    <h2 class="big">UK</h2>
    <p class="note">Pick a tool below.</p>
    <div class="hub" role="group" aria-label="UK tools">
      <button class="bigbtn" onclick="openUK('uk_sizefinder')">Size Finder</button>
      <button class="bigbtn" onclick="openUK('uk_mysizes')">My Sizes (all brands)</button>
      <button class="bigbtn" onclick="openUK('uk_brandnotes')">Brand Notes</button>
      <button class="bigbtn" onclick="openUK('uk_history')">History</button>
      <button class="bigbtn" onclick="openUK('uk_converters')">Converters</button>
    </div>
  </section>

  <!-- UK › Size Finder -->
  <section id="uk_sizefinder" class="screen" aria-label="UK Size Finder">
    <div class="card">
      <h3 class="big">Size Finder</h3>
      <div class="row two">
        <div>
          <label class="ms-label" for="sf_brand">Brand</label>
          <select id="sf_brand" class="ms-select"></select>
          <p class="note" id="sf_support_note" style="margin-top:6px;"></p>
        </div>
        <div>
          <label class="ms-label" for="sf_category">Category</label>
          <select id="sf_category" class="ms-select"></select>
        </div>
        <div>
          <label class="ms-label" for="sf_fit">Fit preference</label>
          <select id="sf_fit" class="ms-select">
            <option value="standard">Standard</option>
            <option value="snug">Snug</option>
            <option value="relaxed">Relaxed</option>
          </select>
        </div>
      </div>
      <div class="toolbar">
        <button class="pill" onclick="computeSize()">Get my size</button>
        <button class="pill" onclick="saveHistory()">Save to history</button>
      </div>
      <div id="sf_result" class="card" style="display:none;" aria-live="polite"></div>
    </div>
  </section>

  <!-- UK › My Sizes -->
  <section id="uk_mysizes" class="screen" aria-label="UK My Sizes">
    <div class="card">
      <h3 class="big">My Sizes (filtered by body type)</h3>
      <p class="note">Only brands that support your selected body type are included.</p>

      <div class="row two">
        <div>
          <label class="ms-label" for="ms_category">Categories</label>
          <select id="ms_category" class="ms-select" multiple size="4" style="height:120px;"></select>
          <p class="note" style="margin:6px 0 0;">Cmd/Ctrl-click to multi-select.</p>
        </div>

        <div>
          <label class="ms-label">Fit preference</label>
          <div id="ms_fit_pills" class="pt-pills" role="tablist" aria-label="Fit">
            <button type="button" class="pt-pill ms-fit-pill" data-fit="standard">Standard</button>
            <button type="button" class="pt-pill ms-fit-pill" data-fit="snug">Snug</button>
            <button type="button" class="pt-pill ms-fit-pill" data-fit="relaxed">Relaxed</button>
            <button type="button" class="pt-pill ms-fit-pill" data-fit="all">All</button>
          </div>

          <select id="ms_fit" class="ms-select" style="display:none;">
            <option value="standard" selected>Standard</option>
            <option value="snug">Snug</option>
            <option value="relaxed">Relaxed</option>
            <option value="all">All</option>
          </select>

          <div class="toolbar" style="margin-top:8px;">
            <button class="pill" onclick="computeAllSizes()">Compute all</button>
            <button class="pill" onclick="exportMySizesCSV()">Export CSV</button>
            <button class="pill" onclick="copyMySizes()">Copy</button>
            <span class="pill" id="ms_count">—</span>
          </div>
        </div>
      </div>

      <div id="ms_list" class="panel-list"></div>
    </div>
  </section>

  <!-- UK › Brand Notes -->
  <section id="uk_brandnotes" class="screen" aria-label="UK Brand Notes">
    <div class="card">
      <h3 class="big">Brand Notes</h3>
      <p class="note">Shows only brands that support your selected body type.</p>
      <div id="brandList" class="panel-list"></div>
    </div>
  </section>

  <!-- UK › History -->
  <section id="uk_history" class="screen" aria-label="UK History">
    <div class="card">
      <h3 class="big">History</h3>
      <div id="histList" class="panel-list"></div>
    </div>
  </section>

  <!-- UK › Converters -->
  <section id="uk_converters" class="screen" aria-label="UK Converters">
    <div class="card">
      <h3>Clothes (UK ⇄ EU ⇄ US)</h3>
      <div class="row three">
        <div><label for="cw_from">From</label><select id="cw_from"><option>UK</option><option>EU</option><option>US</option></select></div>
        <div><label for="cw_to">To</label><select id="cw_to"><option>UK</option><option>EU</option><option>US</option></select></div>
        <div><label for="cw_val">Value</label><input id="cw_val" inputmode="decimal" placeholder="e.g., 10"></div>
      </div>
      <div class="toolbar">
        <button class="pill" onclick="convertClothing()">Convert</button>
        <span class="pill" id="cw_out">—</span>
      </div>
      <p class="note">Approximate mappings for women’s sizes.</p>
    </div>

    <div class="card">
      <h3>Shoes</h3>
      <div class="row three">
        <div><label for="sh_from">From</label><select id="sh_from"><option>UK</option><option>EU</option><option>US</option></select></div>
        <div><label for="sh_to">To</label><select id="sh_to"><option>UK</option><option>EU</option><option>US</option></select></div>
        <div><label for="sh_val">Value</label><input id="sh_val" inputmode="decimal" placeholder="e.g., 5"></div>
      </div>
      <div class="toolbar">
        <button class="pill" onclick="convertShoes()">Convert</button>
        <span class="pill" id="sh_out">—</span>
      </div>
      <p class="note">Approximate women’s shoe size mapping.</p>
    </div>

    <div class="card">
      <h3>Bra helper</h3>
      <div class="row three">
        <div><label for="br_band">Band (cm)</label><input id="br_band" inputmode="decimal" placeholder="e.g., 75"></div>
        <div><label for="br_cup">Cup</label><input id="br_cup" placeholder="e.g., C"></div>
        <div style="display:flex;align-items:flex-end;"><button class="pill" onclick="convertBra()">Estimate</button></div>
      </div>
      <div class="toolbar"><span class="pill" id="br_out">—</span></div>
      <p class="note">Very rough: UK band ≈ round(cm ÷ 2.54).</p>
    </div>
  </section>

  <!-- Profile -->
  <section id="profile" class="screen" aria-label="Profile">
    <div class="card">
      <h3 class="big">Profile</h3>
      <p class="note">Use the top pills to switch units and body type. Profiles are managed in Settings → Profiles.</p>
    </div>

    <div class="card">
      <div class="row two">
        <div>
          <label class="ms-label" for="m_name">Profile name</label>
          <input id="m_name" placeholder="e.g., Emma">
        </div>
        <div>
          <label class="ms-label" for="m_sex">Sex</label>
          <select id="m_sex" class="ms-select">
            <option value="female">Female</option>
            <option value="male">Male</option>
            <option value="child">Child</option>
          </select>
        </div>
      </div>

      <div class="divider"></div>

      <!-- measurements -->
      <div class="row two">
        <div><label class="ms-label" for="m_height">Height <span class="unit-badge">cm</span></label><input id="m_height" inputmode="decimal" placeholder="e.g., 168"></div>
        <div><label class="ms-label" for="m_shoulder">Shoulder <span class="unit-badge">cm</span></label><input id="m_shoulder" inputmode="decimal" placeholder="e.g., 40"></div>
        <div><label class="ms-label" for="m_bust">Bust <span class="unit-badge">cm</span></label><input id="m_bust" inputmode="decimal" placeholder="e.g., 88"></div>
        <div><label class="ms-label" for="m_underbust">Underbust <span class="unit-badge">cm</span></label><input id="m_underbust" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_waist">Waist <span class="unit-badge">cm</span></label><input id="m_waist" inputmode="decimal" placeholder="e.g., 70"></div>
        <div><label class="ms-label" for="m_hip">Hip <span class="unit-badge">cm</span></label><input id="m_hip" inputmode="decimal" placeholder="e.g., 94"></div>
        <div><label class="ms-label" for="m_thigh">Thigh <span class="unit-badge">cm</span></label><input id="m_thigh" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_calf">Calf <span class="unit-badge">cm</span></label><input id="m_calf" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_ankle">Ankle <span class="unit-badge">cm</span></label><input id="m_ankle" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_upperarm">Upper arm <span class="unit-badge">cm</span></label><input id="m_upperarm" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_forearm">Forearm <span class="unit-badge">cm</span></label><input id="m_forearm" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_wrist">Wrist <span class="unit-badge">cm</span></label><input id="m_wrist" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_neck">Neck <span class="unit-badge">cm</span></label><input id="m_neck" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_inseam">Inseam <span class="unit-badge">cm</span></label><input id="m_inseam" inputmode="decimal" placeholder="e.g., 76"></div>
        <div><label class="ms-label" for="m_torso">Torso <span class="unit-badge">cm</span></label><input id="m_torso" inputmode="decimal" placeholder="optional"></div>
        <div><label class="ms-label" for="m_footlen">Foot length <span class="unit-badge">cm</span></label><input id="m_footlen" inputmode="decimal" placeholder="e.g., 24.6"></div>
        <div><label class="ms-label" for="m_band">Bra band <span class="unit-badge">cm</span></label><input id="m_band" inputmode="decimal" placeholder="e.g., 75"></div>
        <div><label class="ms-label" for="m_cup">Bra cup</label><input id="m_cup" placeholder="e.g., C"></div>
      </div>

      <!-- quick weight + log -->
      <div class="divider"></div>
      <div class="row two">
        <div>
          <label class="ms-label" for="m_weight_now">Current weight</label>
          <input id="m_weight_now" inputmode="decimal" placeholder="e.g., 80">
          <p class="note">Uses MiStats weight unit.</p>
        </div>
        <div>
          <label class="ms-label" for="m_log_date">Date</label>
          <input id="m_log_date" type="date">
        </div>
      </div>
      <div class="toolbar">
        <button class="pill" onclick="saveActiveProfile()">Save profile</button>
        <button class="pill" onclick="resetFormFields()">Reset fields</button>
        <button class="pill" onclick="deleteActiveProfile()">Delete profile</button>
        <button class="pill" onclick="logToMiStats()">Log weight + measurements → MiStats</button>
      </div>
    </div>
  </section>

  <!-- Placeholders -->
  <section id="eu" class="screen" aria-label="EU"><h2 class="big">EU</h2><p class="note">Coming later.</p></section>
  <section id="us" class="screen" aria-label="US"><h2 class="big">US</h2><p class="note">Coming later.</p></section>
  <section id="ca" class="screen" aria-label="CA"><h2 class="big">CA</h2><p class="note">Coming later.</p></section>

  <!-- MiStats -->
  <section id="mistats" class="screen" aria-label="MiStats">
    <h2 class="big">MiStats</h2>
    <p class="note">Personal weight & measurements tracker linked to your active profile.</p>

    <div class="toolbar" role="tablist" aria-label="MiStats views" id="mi_tabs">
      <button class="pill mi-tab active" data-view="current"  onclick="window.setMiTab && setMiTab('current')">Current</button>
      <button class="pill mi-tab" data-view="graph"    onclick="window.setMiTab && setMiTab('graph')">Graph</button>
      <button class="pill mi-tab" data-view="history"  onclick="window.setMiTab && setMiTab('history')">History</button>
      <button class="pill mi-tab" data-view="settings" onclick="window.setMiTab && setMiTab('settings')">Settings</button>
    </div>

    <!-- CURRENT -->
    <div id="mi_view_current" class="mi-view card active">
      <div style="display:grid;grid-template-columns:1fr;gap:12px;">
        <div>
          <div class="big" id="mi_current_title">—</div>
          <div class="note" id="mi_current_meta">—</div>
        </div>

        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;">
          <div class="card">
            <div class="note">Start</div>
            <div class="big" id="mi_start">—</div>
            <div class="note" id="mi_start_bmi">BMI —</div>
          </div>
          <div class="card">
            <div class="note">Current</div>
            <div class="big" id="mi_current">—</div>
            <div class="note" id="mi_current_bmi">BMI —</div>
          </div>
          <div class="card">
            <div class="note">Target</div>
            <div class="big" id="mi_target">—</div>
            <div class="note" id="mi_target_bmi">BMI —</div>
          </div>
        </div>

        <!-- Area losses -->
        <div class="card">
          <div class="note">Area losses since start (cm)</div>
          <div class="mi-tiles" id="mi_area_tiles"></div>
          <div class="note" id="mi_area_total">—</div>
        </div>

        <div class="card">
          <div class="note">Progress</div>
          <div class="mi-bar"><div id="mi_prog_bar"></div></div>
          <div class="note" id="mi_prog_text">—</div>
        </div>

        <div class="row two">
          <div class="card">
            <div class="note">Avg daily change</div>
            <div class="big" id="mi_avg_day">—</div>
          </div>
          <div class="card">
            <div class="note">Avg weekly change</div>
            <div class="big" id="mi_avg_week">—</div>
          </div>
        </div>

        <div class="card">
          <div class="row three">
            <div>
              <label for="mi_weight_in">Enter weight</label>
              <input id="mi_weight_in" inputmode="decimal" placeholder="e.g., 80">
            </div>
            <div>
              <label for="mi_date_in">Date</label>
              <input id="mi_date_in" type="date">
            </div>
            <div style="display:flex;align-items:flex-end;">
              <button class="pill" id="mi_add_btn">Save entry</button>
            </div>
          </div>
          <p class="note" id="mi_hint_units">Units: —</p>

          <!-- Inline measurement capture -->
          <div class="divider"></div>
          <div class="note">Optional: log measurements with this weight</div>
          <div class="row two" id="mi_parts_inputs"></div>
          <div class="toolbar"><button class="pill" id="mi_add_with_parts_btn">Save weight + measurements</button></div>
        </div>
      </div>
    </div>

    <!-- GRAPH -->
    <div id="mi_view_graph" class="mi-view card" style="display:none;">
      <div class="toolbar">
        <span class="pill">Zoom</span>
        <input id="mi_zoom" type="range" min="0" max="100" value="0" style="accent-color:#1d4ed8;width:180px;">
        <span class="pill" id="mi_zoom_label">All time</span>
      </div>
      <div class="mi-legend" id="mi_series_legend"></div>
      <canvas id="mi_canvas" width="1200" height="420" style="width:100%;height:320px;border-radius:12px;background:#0f131a;border:1px solid var(--border);"></canvas>
      <p class="note" id="mi_graph_note">—</p>
    </div>

    <!-- HISTORY -->
    <div id="mi_view_history" class="mi-view card" style="display:none;">
      <div id="mi_hist_list"></div>
    </div>

    <!-- SETTINGS -->
    <div id="mi_view_settings" class="mi-view card" style="display:none;">
      <div class="row two">
        <div>
          <label>Weight unit</label>
          <div class="pill-row">
            <button class="pill mi-unit-w" data-u="kg">Kilos</button>
            <button class="pill mi-unit-w" data-u="lb">Pounds</button>
            <button class="pill mi-unit-w" data-u="st">Stones</button>
          </div>
        </div>
        <div>
          <label>Height unit (for BMI)</label>
          <div class="pill-row">
            <button class="pill mi-unit-h" data-u="cm">Centimeters</button>
            <button class="pill mi-unit-h" data-u="m">Meters</button>
            <button class="pill mi-unit-h" data-u="ftin">Feet+Inches</button>
          </div>
        </div>
      </div>

      <div class="row two" style="margin-top:10px;">
        <div>
          <label for="mi_height">Your height</label>
          <input id="mi_height" placeholder="e.g., 168 (cm)">
          <p class="note" id="mi_height_hint">Stored in cm internally.</p>
        </div>
        <div>
          <label for="mi_target_in">Target weight</label>
          <input id="mi_target_in" placeholder="e.g., 70">
          <p class="note">Leave empty to disable target.</p>
        </div>
      </div>

      <div class="toolbar" style="margin-top:10px;">
        <button class="pill" id="mi_save_settings">Save settings</button>
        <button class="pill" id="mi_reset_profile">Reset this profile</button>
      </div>
    </div>
  </section>

  <!-- SETTINGS (app-level) -->
  <section id="settings" class="screen" aria-label="Settings">
    <h2 class="big">Settings</h2>
    <p class="note">Preferences.</p>

    <!-- Profiles inside Settings -->
    <div class="card">
      <div class="row two">
        <div>
          <div class="big">Profiles</div>
          <p class="note">Switch or add profiles here.</p>
        </div>
        <div style="display:flex;align-items:center;justify-content:flex-end;">
          <button class="pill" onclick="switchTab('profile')">Open Profile editor</button>
        </div>
      </div>
      <div id="profilePillsSettings" class="pill-row" style="margin-top:10px;"></div>
    </div>

    <!-- global weight-units card -->
    <div id="global_weight_units_card" class="card"></div>
  </section>

  <!-- Bottom Tabs -->
  <div class="bottom-tabs" role="tablist" aria-label="Main tabs">
    <button id="tab_home" class="tab active" onclick="switchTab('home')" role="tab" aria-selected="true">Home</button>
    <button id="tab_profile" class="tab" onclick="switchTab('profile')" role="tab">Profile</button>
    <button id="tab_mistats" class="tab" onclick="switchTab('mistats')" role="tab">MiStats</button>
    <button id="tab_settings" class="tab" onclick="switchTab('settings')" role="tab">Settings</button>
    <!-- Hub tab acts like an active "back" button -->
    <button id="tab_hub" class="tab" onclick="hubBack()" role="tab">Hub</button>
  </div>
