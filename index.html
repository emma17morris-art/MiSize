<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MiSize Prototype</title>

  <!-- ========== STYLES ========== -->
  <style>
    /* ===== THEME ===== */
    :root {
      --brand:#4f7cff; --brand-text:#fff;
      --bg:#0b0d12; --card:#0f131a;
      --border:#1b2230; --text:#eef1f5; --muted:#aab3c5;
      --radius:14px;
      --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    body { margin:0; font-family:var(--font); background:var(--bg); color:var(--text);}
    * { box-sizing:border-box; }
    .screen { display:none; padding:20px; }
    .screen.active { display:block; }

    /* ===== BOTTOM TABS ===== */
    .bottom-tabs {
      position:fixed; bottom:0; left:0; right:0;
      display:flex; justify-content:space-around;
      background:#0f131a; border-top:1px solid var(--border);
      z-index:20;
    }
    .bottom-tabs button {
      flex:1; padding:12px; border:0; background:none; color:var(--text);
      font-weight:600; cursor:pointer;
    }
    .bottom-tabs button.active { color:var(--brand); }

    /* ===== REGION TILES ===== */
    .tiles { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-top:30px; }
    .tiles button {
      font-size:22px; font-weight:700;
      padding:50px 0; border-radius:12px;
      border:0; cursor:pointer; color:#fff;
    }
    .uk { background:#1d2b53; }
    .eu { background:#3b5bdb; }
    .us { background:#b22234; }
    .ca { background:#d62828; }

    /* ===== BACK BUTTON ===== */
    .backbtn {
      position: fixed; top: 14px; left: 14px;
      z-index: 50;
      background:#182034; color:#eef1f5;
      border:1px solid #223049;
      padding:10px 14px;
      border-radius:12px;
      font-weight:600;
      cursor:pointer;
      display:none; /* hidden on home + UK */
    }

    /* ===== CARDS (content blocks) ===== */
    .card {
      background:#111520;
      border:1px solid var(--border);
      border-radius:12px;
      padding:16px;
      margin-bottom:20px;
    }
  </style>
</head>
<body>

  <!-- ========== FLOATING BACK BUTTON ========== -->
  <button class="backbtn" id="backbtn" onclick="goBack()" aria-label="Back">◀ Back</button>

  <!-- ========== SCREENS ========== -->

  <!-- ===== HOME ===== -->
  <section id="home" class="screen active">
    <h1>Welcome to MiSize</h1>
    <p>Select your region:</p>
    <div class="tiles">
      <button class="uk" onclick="switchTab('uk')">UK</button>
      <button class="eu" onclick="switchTab('eu')">EU</button>
      <button class="us" onclick="switchTab('us')">US</button>
      <button class="ca" onclick="switchTab('ca')">CA</button>
    </div>
  </section>

  <!-- ===== UK ===== -->
  <section id="uk" class="screen">
    <h2>UK Tools</h2>

    <!-- PROFILE -->
    <div class="card">
      <h3>Profiles & Measurements</h3>
      <p>➡ Your measurement/profile UI goes here (fields, save button, unit toggle)</p>
    </div>

    <!-- SIZE FINDER -->
    <div class="card">
      <h3>Size Finder</h3>
      <div class="row three">
        <div><label>Brand</label><select id="sf_brand"></select></div>
        <div><label>Category</label><select id="sf_category"></select></div>
        <div>
          <label>Fit preference</label>
          <select id="sf_fit">
            <option value="standard">Standard</option>
            <option value="snug">Snug</option>
            <option value="relaxed">Relaxed</option>
          </select>
        </div>
        <div>
          <label>Body Type</label>
          <select id="sf_bodytype">
            <option value="standard">Standard</option>
            <option value="petite">Petite</option>
            <option value="tall">Tall</option>
            <option value="curvy">Curvy</option>
          </select>
        </div>
      </div>
      <div class="toolbar">
        <button class="cta" onclick="computeSize()">Get my size</button>
        <button class="ghost" onclick="go('measurements')">Edit measurements</button>
      </div>
      <div id="sf_result" class="card" style="display:none;">
        <h3>Result</h3>
        <p class="big" id="sf_size"></p>
        <p class="subtitle" id="sf_confidence"></p>
        <div class="divider"></div>
        <div id="sf_notes" class="note"></div>
        <div class="toolbar">
          <button class="ghost" onclick="saveHistory()">Save to history</button>
          <button class="ghost" onclick="go('brandNotes')">See brand notes</button>
        </div>
      </div>
    </div>

    <!-- MY SIZES -->
    <div class="card">
      <h3>My Sizes Across Brands</h3>
      <div id="ms_list" class="list"></div>
    </div>

    <!-- BRAND NOTES -->
    <div class="card">
      <h3>Brand Notes</h3>
      <div id="brandList" class="list"></div>
    </div>

    <!-- HISTORY -->
    <div class="card">
      <h3>History</h3>
      <div id="histList" class="list"></div>
    </div>

    <!-- CONVERTERS -->
    <div class="card">
      <h3>Converters</h3>
      <p>➡ Clothing, Shoes, Bra converters code here</p>
    </div>
  </section>

  <!-- ===== EU ===== -->
  <section id="eu" class="screen">
    <h2>EU section (empty for now)</h2>
  </section>

  <!-- ===== US ===== -->
  <section id="us" class="screen">
    <h2>US section (empty for now)</h2>
  </section>

  <!-- ===== CA ===== -->
  <section id="ca" class="screen">
    <h2>CA section (empty for now)</h2>
  </section>

  <!-- ===== MiStats ===== -->
  <section id="mistats" class="screen">
    <h2>MiStats</h2>
    <p>(This will be for weight tracking later)</p>
  </section>

  <!-- ===== Settings ===== -->
  <section id="settings" class="screen">
    <h2>Settings</h2>
    <p>⚙️ App preferences go here</p>
  </section>

  <!-- ========== BOTTOM TABS ========== -->
  <div class="bottom-tabs">
    <button id="tab_home" class="tab active" onclick="switchTab('home')">Home</button>
    <button id="tab_uk" class="tab" onclick="switchTab('uk')">Profile</button>
    <button id="tab_mistats" class="tab" onclick="switchTab('mistats')">MiStats</button>
    <button id="tab_settings" class="tab" onclick="switchTab('settings')">Settings</button>
  </div>

  <!-- ========== SCRIPTS ========== -->
  <script>
    /* ===== Helper ===== */
    function $(id){ return document.getElementById(id); }

    /* ===== Nav State ===== */
    const NAV_STACK=[]; 
    let CURRENT_SCREEN='home';

    function switchTab(id){
      if (id !== CURRENT_SCREEN) {
        NAV_STACK.push(CURRENT_SCREEN);
      }
      document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
      (document.getElementById(id)||$('home')).classList.add('active');
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      const tab=$('tab_'+id); if(tab) tab.classList.add('active');
      CURRENT_SCREEN=id;
      updateBackButton();
    }

    function goBack(){
      const prev = NAV_STACK.pop() || (CURRENT_SCREEN!=='uk' ? 'uk' : 'home');
      switchTab(prev);
    }

    function updateBackButton(){
      const btn=$('backbtn');
      if(CURRENT_SCREEN==='home' || CURRENT_SCREEN==='uk'){
        btn.style.display='none';
      } else {
        btn.style.display='inline-block';
      }
    }

    /* ===== Example: computeSize function stub ===== */
    function computeSize(){
      document.getElementById("sf_result").style.display = "block";
      document.getElementById("sf_size").innerText = "Size M";
      document.getElementById("sf_confidence").innerText = "Confidence: High";
      document.getElementById("sf_notes").innerText = "Example notes here.";
    }
  </script>

</body>
</html>
