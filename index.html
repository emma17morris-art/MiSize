<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MiSize - Size Finder & Body Tracker!</title>
  <style>
    :root {
      --brand: #8A2BE2;
      --bg: #2b1055;
      --card: #111520;
      --border: #1b2230;
      --text: #eef1f5;
      --muted: #aab3c5;
      --blue: #1d4ed8;
      --green: #10b981;
      --orange: #f59e0b;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
    }
    
    .topbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: rgba(15, 19, 26, .9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      padding: 8px 16px;
    }
    
    .topbar-inner {
      display: flex;
      gap: 12px;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .logo {
      font-size: 18px;
      font-weight: 900;
      color: #cfe0ff;
      margin-right: 8px;
    }
    
    .pill-group {
      display: flex;
      gap: 6px;
      align-items: center;
    }
    
    .pill {
      border: 1px solid rgba(255, 255, 255, .12);
      background: #151a3a;
      color: #c9d3ea;
      font-weight: 700;
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .pill.active {
      background: var(--blue);
      color: #fff;
      border-color: var(--blue);
    }
    
    .spacer {
      flex: 1;
    }
    
    .main-container {
      padding-top: 80px;
      padding-bottom: 80px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    
    .header {
      margin-bottom: 40px;
    }
    
    .title {
      font-size: 48px;
      font-weight: 900;
      margin: 0 0 12px;
      color: var(--text);
    }
    
    .subtitle {
      font-size: 18px;
      color: var(--muted);
      margin: 0;
    }
    
    .region-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      width: 100%;
      max-width: 600px;
      padding: 0 20px;
    }
    
    @media (min-width: 768px) {
      .region-grid {
        grid-template-columns: repeat(2, 1fr);
        max-width: 700px;
        gap: 24px;
      }
    }
    
    @media (min-width: 1024px) {
      .region-grid {
        grid-template-columns: repeat(4, 1fr);
        max-width: 900px;
      }
    }
    
    .region-tile {
      background: var(--blue);
      border-radius: 16px;
      padding: 32px 20px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid transparent;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 140px;
    }
    
    .region-tile:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(29, 78, 216, 0.3);
      border-color: rgba(255, 255, 255, 0.2);
    }
    
    .region-tile:active {
      transform: translateY(-2px);
    }
    
    .region-flag {
      font-size: 40px;
      margin-bottom: 12px;
      display: block;
    }
    
    .region-name {
      font-size: 20px;
      font-weight: 800;
      color: #fff;
      margin: 0;
    }
    
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(15, 19, 26, .9);
      backdrop-filter: blur(10px);
      border-top: 1px solid var(--border);
      display: flex;
      z-index: 100;
    }
    
    .nav-item {
      flex: 1;
      padding: 16px 12px;
      border: 0;
      background: transparent;
      color: #cfd7ea;
      font-weight: 700;
      font-size: 12px;
      cursor: pointer;
      transition: color 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .nav-item:hover {
      color: var(--brand);
    }
    
    .nav-item.active {
      color: var(--brand);
    }

    .screen {
      display: none;
      padding-top: 80px;
      padding-bottom: 80px;
      height: 100vh;
      overflow-y: auto;
    }

    .screen.active {
      display: block;
    }

    .system-status {
      background: var(--card);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
      border: 2px solid var(--border);
    }

    .status-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      font-weight: 600;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .status-online { background: var(--green); }
    .status-loading { background: var(--orange); }
    .status-offline { background: var(--muted); }
  </style>
</head>
<body>
  <!-- Top Bar -->
  <div class="topbar">
    <div class="topbar-inner">
      <div class="logo">MiSize</div>
      
      <div class="pill-group">
        <button class="pill active" data-type="standard">Std</button>
        <button class="pill" data-type="petite">Petite</button>
        <button class="pill" data-type="tall">Tall</button>
        <button class="pill" data-type="plus">Plus</button>
      </div>
      
      <div class="spacer"></div>
      
      <div class="pill-group">
        <button class="pill active" data-unit="cm">cm</button>
        <button class="pill" data-unit="inch">inch</button>
      </div>
    </div>
  </div>

  <!-- Home Screen -->
  <div id="home" class="screen active">
    <div class="main-container">
      <div class="header">
        <h1 class="title">Welcome to MiSize</h1>
        <p class="subtitle">Your personal size finder and body tracker with AI-powered sizing!</p>
      </div>
      
      <div class="system-status">
        <div class="status-indicator">
          <div class="status-dot status-online" id="system-status-dot"></div>
          <span id="system-status-text">System ready with profile data!</span>
        </div>
      </div>
      
      <div class="region-grid">
        <div class="region-tile" onclick="enterHub('UK')">
          <span class="region-flag">🇬🇧</span>
          <h3 class="region-name">UK</h3>
        </div>
        
        <div class="region-tile" onclick="alert('Coming soon!')">
          <span class="region-flag">🇪🇺</span>
          <h3 class="region-name">EU</h3>
        </div>
        
        <div class="region-tile" onclick="alert('Coming soon!')">
          <span class="region-flag">🇺🇸</span>
          <h3 class="region-name">US</h3>
        </div>
        
        <div class="region-tile" onclick="alert('Coming soon!')">
          <span class="region-flag">🇨🇦</span>
          <h3 class="region-name">CA</h3>
        </div>
      </div>
    </div>
  </div>

  <!-- Test Screen -->
  <div id="test-screen" class="screen">
    <div class="main-container">
      <h1 class="title">Profile & Brand Test</h1>
      <p class="subtitle" id="data-status">Loading profile data...</p>
      <div id="profile-info" style="margin-top: 20px; text-align: left; max-width: 600px;"></div>
      <button onclick="goHome()" style="padding: 12px 24px; background: var(--brand); color: white; border: none; border-radius: 8px; cursor: pointer; margin-top: 20px;">Go Home</button>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <button class="nav-item active" onclick="goHome()">Home</button>
    <button class="nav-item" onclick="goToScreen('test-screen')">Test Data</button>
    <button class="nav-item" onclick="alert('MiStats coming soon!')">MiStats</button>
    <button class="nav-item" onclick="alert('Settings coming soon!')">Settings</button>
    <button class="nav-item" onclick="alert('Help coming soon!')">Help</button>
  </div>

<script>
// Global variables
let currentScreen = 'home';
let navigationHistory = [];
let selectedBodyType = 'standard';
let selectedUnit = 'cm';
let currentProfile = 'Emma Morris';

// YOUR PROFILE DATA (from Section 3)
let profileData = {
  'Emma Morris': {
    name: 'Emma Morris',
    dateOfBirth: '1983-10-12',
    gender: 'female',
    bodyFrame: 'medium',
    startingDate: '2022-03-19',
    startingWeight: { value: 150, unit: 'kg' },
    startingHeight: { value: 183, unit: 'cm' },
    targetWeight: { value: 80, unit: 'kg' },
    targetDate: '2023-06-30',
    measurements: { weight: 80, chest: 36, waist: 34, hips: 38, shoulders: 38, arms: 28 },
    history: [
      { date: '2022-03-19', type: 'weight', value: 150, unit: 'kg' },
      { date: '2023-08-19', type: 'weight', value: 80, unit: 'kg' },
      { date: '2024-12-19', type: 'waist', value: 34, unit: 'inch' },
      { date: '2024-12-19', type: 'hips', value: 38, unit: 'inch' },
      { date: '2024-12-19', type: 'chest', value: 36, unit: 'inch' }
    ]
  },
  'John Doe': {
    name: 'John Doe',
    dateOfBirth: '1985-08-20',
    gender: 'male',
    bodyFrame: 'large',
    startingDate: '2024-02-01',
    startingWeight: { value: 85, unit: 'kg' },
    startingHeight: { value: 180, unit: 'cm' },
    targetWeight: { value: 75, unit: 'kg' },
    measurements: { weight: 78, chest: 102, waist: 84, hips: 96, shoulders: 46, arms: 32 },
    history: [
      { date: '2024-02-01', type: 'weight', value: 85, unit: 'kg' },
      { date: '2024-04-15', type: 'weight', value: 78, unit: 'kg' }
    ]
  }
};

// YOUR BRAND DATABASE (from Section 3)
const BRAND_SIZE_DATABASE = {
  'ASOS': {
    name: 'ASOS',
    lastUpdated: new Date().toISOString(),
    categories: {
      "Women's Tops": {
        '8': { bust: 32, waist: 26, hips: 34 },
        '10': { bust: 34, waist: 28, hips: 36 },
        '12': { bust: 36, waist: 30, hips: 38 },
        '14': { bust: 38, waist: 32, hips: 40 },
        '16': { bust: 40, waist: 34, hips: 42 },
        '18': { bust: 42, waist: 36, hips: 44 },
        '20': { bust: 44, waist: 38, hips: 46 },
        '22': { bust: 46, waist: 40, hips: 48 }
      }
    },
    notes: {
      sizing: 'UK sizes, runs slightly large',
      bodyTypes: 'Standard, Petite, Tall, Plus',
      categories: 'Full range - jeans, dresses, tops, shoes, activewear',
      fitNotes: 'Size down for oversized items, true to size for fitted',
      special: 'Excellent size inclusivity, detailed size guides, online exclusive'
    }
  },
  'Zara': {
    name: 'Zara',
    lastUpdated: new Date().toISOString(),
    categories: {
      "Women's Tops": {
        'S': { bust: 34, waist: 28, hips: 36 },
        'M': { bust: 36, waist: 30, hips: 38 },
        'L': { bust: 38, waist: 32, hips: 40 },
        'XL': { bust: 40, waist: 34, hips: 42 },
        'XXL': { bust: 42, waist: 36, hips: 44 }
      }
    },
    notes: {
      sizing: 'European sizes, runs small',
      bodyTypes: 'Standard, Limited plus sizes',
      categories: 'Trend fashion - dresses, tops, jeans, shoes',
      fitNotes: 'Size up 1-2 sizes, fitted cuts',
      special: 'Fast fashion, trend-focused, size up recommended'
    }
  }
};

console.log('🚀 MiSize App Starting with profile data...');

// Navigation functions
function goToScreen(screenId) {
  console.log('Navigating to:', screenId);
  
  document.querySelectorAll('.screen').forEach(screen => {
    screen.classList.remove('active');
  });
  
  const targetScreen = document.getElementById(screenId);
  if (targetScreen) {
    targetScreen.classList.add('active');
    currentScreen = screenId;
    
    // Update screen content
    if (screenId === 'test-screen') {
      displayProfileData();
    }
    
    updateNavigation();
    console.log('✅ Navigation successful');
  } else {
    console.error('❌ Screen not found:', screenId);
  }
}

function goHome() {
  console.log('Going home...');
  goToScreen('home');
}

function enterHub(region) {
  console.log('Entering hub:', region);
  if (region === 'UK') {
    goToScreen('test-screen');
  } else {
    alert(region + ' hub coming soon!');
  }
}

function displayProfileData() {
  const statusElement = document.getElementById('data-status');
  const infoElement = document.getElementById('profile-info');
  
  if (!statusElement || !infoElement) {
    console.error('Status or info elements not found');
    return;
  }
  
  try {
    const profile = profileData[currentProfile];
    const brandCount = Object.keys(BRAND_SIZE_DATABASE).length;
    
    statusElement.textContent = `✅ Data loaded: ${Object.keys(profileData).length} profiles, ${brandCount} brands`;
    
    infoElement.innerHTML = `
      <div style="background: var(--card); padding: 20px; border-radius: 12px; border: 2px solid var(--border);">
        <h3 style="color: var(--brand); margin-top: 0;">Current Profile: ${profile.name}</h3>
        <p><strong>Gender:</strong> ${profile.gender}</p>
        <p><strong>Current Weight:</strong> ${profile.measurements.weight}kg</p>
        <p><strong>Measurements:</strong> ${profile.measurements.chest}" bust, ${profile.measurements.waist}" waist, ${profile.measurements.hips}" hips</p>
        <p><strong>History Entries:</strong> ${profile.history.length} records</p>
        
        <h4 style="color: var(--brand); margin-bottom: 8px;">Available Brands:</h4>
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
          ${Object.keys(BRAND_SIZE_DATABASE).map(brand => `
            <span style="background: var(--blue); color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">${brand}</span>
          `).join('')}
        </div>
      </div>
    `;
    
    console.log('✅ Profile data displayed successfully');
    
  } catch (error) {
    console.error('❌ Error displaying profile data:', error);
    statusElement.textContent = '❌ Error loading data';
    infoElement.innerHTML = `<p style="color: var(--orange);">Error: ${error.message}</p>`;
  }
}

function updateNavigation() {
  document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.remove('active');
  });
  
  if (currentScreen === 'home') {
    document.querySelector('.nav-item[onclick="goHome()"]')?.classList.add('active');
  } else if (currentScreen === 'test-screen') {
    document.querySelector('.nav-item[onclick="goToScreen(\'test-screen\')"]')?.classList.add('active');
  }
}

// Pill controls
function setupPillControls() {
  console.log('Setting up pill controls...');
  
  document.querySelectorAll('.pill[data-type]').forEach(pill => {
    pill.addEventListener('click', function() {
      document.querySelectorAll('.pill[data-type]').forEach(p => p.classList.remove('active'));
      this.classList.add('active');
      selectedBodyType = this.dataset.type;
      console.log('Body type selected:', selectedBodyType);
    });
  });

  document.querySelectorAll('.pill[data-unit]').forEach(pill => {
    pill.addEventListener('click', function() {
      document.querySelectorAll('.pill[data-unit]').forEach(p => p.classList.remove('active'));
      this.classList.add('active');
      selectedUnit = this.dataset.unit;
      console.log('Unit selected:', selectedUnit);
    });
  });
  
  console.log('✅ Pill controls set up');
}

// Initialize app
function initApp() {
  console.log('🔄 Initializing app with profile data...');
  
  try {
    setupPillControls();
    updateNavigation();
    
    console.log('📊 Data check:');
    console.log('- Profiles loaded:', Object.keys(profileData).length);
    console.log('- Brands loaded:', Object.keys(BRAND_SIZE_DATABASE).length);
    console.log('- Current profile:', currentProfile);
    
    console.log('✅ App initialized successfully with data');
    
  } catch (error) {
    console.error('❌ App initialization failed:', error);
    alert('App failed to initialize: ' + error.message);
  }
}

// Start the app when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  console.log('📄 DOM loaded, starting app...');
  initApp();
});

console.log('📜 Script loaded with profile & brand data');
</script>
</body>
</html>
